/*! rollup-plugin-babel-minify v5.0.0 | (c) 2018 Comandeer | MIT license (see LICENSE) */
import MagicString from'magic-string';import minifyPreset from'babel-preset-minify';import bannerPlugin,{getCommentContent}from'@comandeer/babel-plugin-banner';import{transform}from'babel-core';function addNewLine(a){const b=new MagicString(a),c=a.indexOf('*/');b.appendRight(c+2,'\n');const d=b.generateMap({includeContent:!0});return{code:b.toString(),map:d}}function filterMinifyOptions(a){const b=['banner','bannerNewLine','sourceMap','comments'],c={};return Object.keys(a).forEach((d)=>{-1===b.indexOf(d)&&(c[d]=a[d])}),c}function isString(a){return'string'==typeof a}function isFn(a){return'function'==typeof a}function isFnOrString(a){return isString(a)||isFn(a)}function minify(a={}){return{name:'babel-minify',transformBundle(b,{banner:c}){const d=filterMinifyOptions(a),e={presets:[[minifyPreset,d]],sourceMaps:!('undefined'!=typeof a.sourceMap)||!!a.sourceMap,comments:!('undefined'!=typeof a.comments)||!!a.comments};if(isFnOrString(a.banner)||isFnOrString(c)){let b=a.banner||c;b=isFn(b)?b():b;const d=getCommentContent(b);let f=!1;e.plugins=[[bannerPlugin,{banner:b}]],e.comments||(e.shouldPrintComment=(a)=>!(f||a!==d)&&(f=!0,!0))}var f=transform(b,e);let g=f.code,h=f.map;if(a.bannerNewLine){var i=addNewLine(g);g=i.code,h=i.map}return{code:g,map:h}}}}export default minify;
//# sourceMappingURL=rollup-plugin-babel-minify.es2015.js.map
